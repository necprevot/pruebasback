<h2>Productos en Tiempo Real</h2>

{{#if success}}
    <div style="color: green; margin-bottom: 10px;">
        {{success}}
    </div>
{{/if}}

{{#if error}}
    <div style="color: red; margin-bottom: 10px;">
        {{error}}
    </div>
{{/if}}

<h3>Agregar Nuevo Producto</h3>
<form action="/api/products" method="POST">
    <div>
        <label for="title">Título:</label>
        <input type="text" id="title" name="title" required>
    </div>
    
    <div>
        <label for="description">Descripción:</label>
        <textarea id="description" name="description" required></textarea>
    </div>
    
    <div>
        <label for="price">Precio:</label>
        <input type="number" id="price" name="price" min="0" step="1" required>
    </div>
    
    <div>
        <label for="status">Estado:</label>
        <select id="status" name="status" required>
            <option value="">Selecciona un estado</option>
            <option value="true">Activo</option>
            <option value="false">Inactivo</option>
        </select>
    </div>
    
    <div>
        <label for="stock">Stock:</label>
        <input type="number" id="stock" name="stock" min="0" required>
    </div>
    
    <div>
        <label for="category">Categoría:</label>
        <input type="text" id="category" name="category" required>
    </div>
    
    <div>
        <label for="thumbnails">Imágenes (URLs separadas por comas):</label>
        <input type="text" id="thumbnails" name="thumbnails" placeholder="https://ejemplo.com/img1.jpg, https://ejemplo.com/img2.jpg">
    </div>
    
    <button type="submit">Agregar Producto</button>
</form>

<hr>

<h3>Lista de Productos</h3>
{{#if products}}
    <ul>
        {{#each products}}
        <li>
            <strong>{{this.title}}</strong> - ${{this.price}}
            <br>
            {{this.description}}
            <br>
            <small>
                Stock: {{this.stock}} | 
                Categoría: {{this.category}} | 
                Estado: {{#if this.status}}Activo{{else}}Inactivo{{/if}} | 
                Código: {{this.code}}
            </small>
            {{#if this.thumbnails}}
                {{#if this.thumbnails.length}}
                    <br>
                    <small>Imágenes: {{this.thumbnails.length}} archivo(s)</small>
                {{/if}}
            {{/if}}
            <br>
            <form action="/api/products/{{this.id}}/delete" method="POST" style="display: inline; margin-top: 5px;">
                <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; cursor: pointer;" onclick="return confirm('¿Estás seguro de que quieres eliminar este producto?')">
                    Eliminar
                </button>
            </form>
        </li>
        {{/each}}
    </ul>
{{else}}
    <p>No hay productos disponibles.</p>
{{/if}}